<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Spore Lite - Editor de Criaturas</title>
    <style>
        body { background: #1a1a2e; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        canvas { background: radial-gradient(circle, #16213e 0%, #0f3460 100%); border: 2px solid #4ecca3; border-radius: 10px; cursor: crosshair; }
        .controls { margin-top: 20px; background: #0f3460; padding: 15px; border-radius: 8px; display: flex; gap: 10px; }
        button { background: #4ecca3; border: none; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #45b293; }
        p { color: #95a5a6; }
    </style>
</head>
<body>

    <h1>Editor de Micro-Especie</h1>
    <canvas id="gameCanvas" width="800" height="500"></canvas>

    <div class="controls">
        <button onclick="addPart('eye')">Añadir Ojo</button>
        <button onclick="addPart('fin')">Añadir Aleta (Velocidad)</button>
        <button onclick="addPart('spike')">Añadir Espina (Ataque)</button>
        <button onclick="resetCreature()">Reiniciar</button>
    </div>
    <p>Haz clic en el canvas para mover tu criatura. ¡Evoluciona!</p>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let creature = {
            x: 400, y: 250,
            targetX: 400, targetY: 250,
            size: 30,
            parts: [],
            speed: 2
        };

        // Escuchar clics para mover
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            creature.targetX = e.clientX - rect.left;
            creature.targetY = e.clientY - rect.top;
        });

        function addPart(type) {
            const angle = Math.random() * Math.PI * 2;
            creature.parts.push({
                type: type,
                dist: creature.size * 0.8,
                angle: angle
            });
            if(type === 'fin') creature.speed += 0.5;
        }

        function resetCreature() {
            creature.parts = [];
            creature.speed = 2;
        }

        function update() {
            // Movimiento suave hacia el objetivo (Interpolación)
            const dx = creature.targetX - creature.x;
            const dy = creature.targetY - creature.y;
            const distance = Math.sqrt(dx*dx + dy*dy);

            if (distance > 5) {
                creature.x += (dx / distance) * creature.speed;
                creature.y += (dy / distance) * creature.speed;
            }

            draw();
            requestAnimationFrame(update);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Dibujar partes
            creature.parts.forEach(part => {
                const px = creature.x + Math.cos(part.angle) * part.dist;
                const py = creature.y + Math.sin(part.angle) * part.dist;
                
                if(part.type === 'eye') {
                    ctx.fillStyle = "white";
                    ctx.beginPath(); ctx.arc(px, py, 8, 0, Math.PI*2); ctx.fill();
                    ctx.fillStyle = "black";
                    ctx.beginPath(); ctx.arc(px, py, 4, 0, Math.PI*2); ctx.fill();
                } 
                else if(part.type === 'fin') {
                    ctx.fillStyle = "#4ecca3";
                    ctx.beginPath(); ctx.ellipse(px, py, 15, 5, part.angle, 0, Math.PI*2); ctx.fill();
                }
                else if(part.type === 'spike') {
                    ctx.fillStyle = "#e94560";
                    ctx.beginPath(); ctx.moveTo(px, py);
                    ctx.lineTo(px + Math.cos(part.angle)*20, py + Math.sin(part.angle)*20);
                    ctx.stroke();
                }
            });

            // Dibujar cuerpo principal (Núcleo)
            ctx.fillStyle = "#4ecca3";
            ctx.beginPath();
            ctx.arc(creature.x, creature.y, creature.size, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = "rgba(255,255,255,0.3)";
            ctx.lineWidth = 5;
            ctx.stroke();
        }

        update();
    </script>
</body>
</html>
