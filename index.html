<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mini RPG Maker en HTML5</title>
    <style>
        body {
            background: #1a1a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
            margin: 0;
        }
        .game-container {
            background: #16213e;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
        }
        canvas {
            border: 4px solid #0f3460;
            border-radius: 8px;
            background: #0f3460;
            display: block;
            margin-bottom: 15px;
        }
        .info {
            color: #e94560;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 0 #0f3460;
            margin-top: 5px;
        }
        button {
            background: #e94560;
            border: none;
            color: white;
            font-size: 16px;
            padding: 8px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
            background: #ff6b8b;
        }
        p {
            color: #aaa;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h2 style="color:white; margin-top:0;">üßô RPG Maker Lite üó°Ô∏è</h2>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div class="info" id="message">¬°Usa las flechas para moverte!</div>
        <button onclick="resetGame()">Reiniciar</button>
        <p>‚ù§Ô∏è Recoge el cofre dorado para ganar</p>
    </div>

    <script>
        // --- Configuraci√≥n del mapa (10x10) ---
        const MAP_SIZE = 10;
        const TILE_SIZE = 40; // px

        // Definici√≥n de tipos de baldosa
        const TILE = {
            FLOOR: 0,
            WALL: 1,
            CHEST: 2
        };

        // Mapa: 0 = suelo, 1 = pared, 2 = cofre
        const mapData = [
            [1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,0,1,0,1],
            [1,0,0,0,0,0,0,1,0,1],
            [1,0,1,0,1,1,0,0,0,1],
            [1,0,0,0,0,0,0,1,0,1],
            [1,0,1,1,0,1,0,1,0,1],
            [1,0,0,0,0,2,0,0,0,1],  // cofre en (5,7) (x,y)
            [1,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1]
        ];

        // Posici√≥n inicial del jugador (fila, columna)
        let player = { x: 1, y: 1 };  // (columna, fila) en el mapa

        // Variable para saber si el cofre fue recogido
        let chestCollected = false;

        // Referencia al canvas y al mensaje
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const messageEl = document.getElementById('message');

        // --- Dibujar el mapa y el jugador ---
        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Recorrer todas las celdas
            for (let row = 0; row < MAP_SIZE; row++) {
                for (let col = 0; col < MAP_SIZE; col++) {
                    let x = col * TILE_SIZE;
                    let y = row * TILE_SIZE;

                    // Dibujar seg√∫n tipo
                    switch (mapData[row][col]) {
                        case TILE.FLOOR:
                            ctx.fillStyle = '#3a4e6b';
                            break;
                        case TILE.WALL:
                            ctx.fillStyle = '#1e2a3a';
                            break;
                        case TILE.CHEST:
                            ctx.fillStyle = '#f3c623'; // dorado
                            break;
                    }
                    ctx.fillRect(x, y, TILE_SIZE-1, TILE_SIZE-1);

                    // Si es cofre, a√±adir un detalle
                    if (mapData[row][col] === TILE.CHEST) {
                        ctx.fillStyle = '#b8860b';
                        ctx.beginPath();
                        ctx.arc(x + TILE_SIZE/2, y + TILE_SIZE/2, 8, 0, 2 * Math.PI);
                        ctx.fill();
                        ctx.fillStyle = '#ffd700';
                        ctx.beginPath();
                        ctx.arc(x + TILE_SIZE/2 - 2, y + TILE_SIZE/2 - 2, 3, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
            }

            // Dibujar al jugador (un h√©roe)
            const playerX = player.x * TILE_SIZE;
            const playerY = player.y * TILE_SIZE;
            ctx.fillStyle = '#e94560';
            ctx.beginPath();
            ctx.arc(playerX + TILE_SIZE/2, playerY + TILE_SIZE/2, 15, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.arc(playerX + TILE_SIZE/2 - 4, playerY + TILE_SIZE/2 - 4, 3, 0, 2 * Math.PI);
            ctx.fill();
        }

        // --- Movimiento del jugador con colisiones ---
        function movePlayer(dx, dy) {
            const newX = player.x + dx;
            const newY = player.y + dy;

            // Verificar l√≠mites del mapa
            if (newX < 0 || newX >= MAP_SIZE || newY < 0 || newY >= MAP_SIZE) return false;

            // Verificar si la celda destino es pared
            if (mapData[newY][newX] === TILE.WALL) {
                messageEl.innerText = '¬°Es una pared!';
                return false;
            }

            // Verificar si es cofre y no ha sido recogido
            if (mapData[newY][newX] === TILE.CHEST && !chestCollected) {
                chestCollected = true;
                mapData[newY][newX] = TILE.FLOOR;  // quitar cofre del mapa
                messageEl.innerText = 'üéâ ¬°Encontraste el cofre! ¬°Victoria! üéâ';
                player.x = newX;
                player.y = newY;
                drawGame();
                return true;
            }

            // Movimiento normal
            player.x = newX;
            player.y = newY;
            messageEl.innerText = 'Sigues explorando...';
            drawGame();
            return true;
        }

        // --- Control por teclado ---
        document.addEventListener('keydown', (e) => {
            // Prevenir scroll con las flechas
            if (e.key.startsWith('Arrow')) e.preventDefault();

            switch (e.key) {
                case 'ArrowUp': movePlayer(0, -1); break;
                case 'ArrowDown': movePlayer(0, 1); break;
                case 'ArrowLeft': movePlayer(-1, 0); break;
                case 'ArrowRight': movePlayer(1, 0); break;
            }
        });

        // --- Reiniciar juego ---
        function resetGame() {
            // Restaurar mapa original
            const originalMap = [
                [1,1,1,1,1,1,1,1,1,1],
                [1,0,0,0,0,0,0,0,0,1],
                [1,0,1,1,0,1,0,1,0,1],
                [1,0,0,0,0,0,0,1,0,1],
                [1,0,1,0,1,1,0,0,0,1],
                [1,0,0,0,0,0,0,1,0,1],
                [1,0,1,1,0,1,0,1,0,1],
                [1,0,0,0,0,2,0,0,0,1],
                [1,0,0,0,0,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1,1]
            ];
            for (let i = 0; i < MAP_SIZE; i++) {
                mapData[i] = originalMap[i].slice();
            }
            player = { x: 1, y: 1 };
            chestCollected = false;
            messageEl.innerText = '¬°Usa las flechas para moverte!';
            drawGame();
        }

        // Dibujar la escena inicial
        drawGame();
    </script>
</body>
</html>
